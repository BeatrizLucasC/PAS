WITH base AS (
  SELECT dominio
  FROM respostas
  WHERE id_utilizador = '{{ appsmith.store.autenticacao.nif }}'
    AND (
      {{ Select_year.selectedOptionValue === "" }}
      OR ano = '{{ Select_year.selectedOptionValue }}'
    )
    AND dominio IN ('ambiental', 'economico', 'social')
  GROUP BY dominio
)
SELECT
  EXISTS (SELECT 1 FROM base WHERE dominio = 'ambiental')  AS ambiental_has,
  EXISTS (SELECT 1 FROM base WHERE dominio = 'economico')  AS economico_has,
  EXISTS (SELECT 1 FROM base WHERE dominio = 'social')     AS social_has;